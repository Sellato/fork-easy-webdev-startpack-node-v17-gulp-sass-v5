const eventsTopSlider=new Swiper(".events-page__cards .swiper",{loop:!0,spaceBetween:30,pagination:{el:".events-page__cards .swiper-pagination",clickable:!0}}),eventsResultSlider=new Swiper(".events-search-slider .swiper",{spaceBetween:30,pagination:{el:".events-search-slider .swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2}}});function createRequestUrl(){const e=document.querySelector("[data-ajax-url]").dataset.ajaxUrl;let t=document.querySelector('[data-filter-input="search"]').value||"",r=document.querySelector('[data-filter-input="time_start"]').value.split(" ")[0],a=document.querySelector('[data-filter-input="time_end"]').value.split(" ")[0],n=document.querySelector(".events-page__search-result-item--current").value,i="";return document.querySelectorAll("[data-filter-switch]").forEach((e=>{"true"===e.dataset.filterSwitch&&(i+=`tags=${e.value}&`)})),`${e}?timeStart=${r}&timeEnd=${a}&status=${n}&search=${t}&${i}&is_ajax=Y`}let getSlides=async function(){let e=createRequestUrl();try{let t=await fetch(e,{method:"GET",headers:{"Content-Type":"text/plain","Access-Control-Allow-Origin":"*"},mode:"no-cors"}),r=await t;return responseData=r.text(),responseData}catch(e){console.error(e)}};function drawSlider(){getSlides().then((e=>{const t=document.createElement("div"),r=document.querySelector(".data-video-container .swiper-wrapper"),a=document.querySelector("#upcoming>span"),n=document.querySelector("#past>span");t.classList.add("response"),t.style.display="none",document.querySelector("body").appendChild(t),t.innerHTML=e.replace(/\s\s+/g,""),a.innerText=t.querySelector('[value="upcoming"]>span').innerText,n.innerText=t.querySelector('[value="past"]>span').innerText,r.innerHTML=t.querySelector(".swiper-wrapper").innerHTML,eventsResultSlider.init(),document.querySelector(".response").remove()}))}function tagButtonsSwitcher(){function e(){this.dataset.filterSwitch="true"===this.dataset.filterSwitch?"false":"true"}document.querySelectorAll("[data-filter-switch]").forEach((t=>{t.addEventListener("click",e),t.addEventListener("click",(e=>{e.preventDefault,setTimeout((e=>{drawSlider()}),50)}))})),drawSlider()}function dateSwitcher(){let e=document.querySelectorAll(".events-page__search-result-item");function t(t){t.preventDefault(),e.forEach((e=>e.classList.remove("events-page__search-result-item--current"))),t.target.classList.add("events-page__search-result-item--current"),drawSlider()}e.forEach((e=>{e.classList.contains(".events-page__search-result-item--current")||e.addEventListener("click",t)}))}function searchOnInput(){document.querySelectorAll("[data-filter-input]").forEach((e=>e.addEventListener("change",drawSlider))),document.querySelector(".video-page__search-block form[data-video-filter]").addEventListener("submit",(e=>{e.preventDefault(),drawSlider()}))}tagButtonsSwitcher(),dateSwitcher(),searchOnInput();
//# sourceMappingURL=../sourcemaps/main.min.js.map
