{"version":3,"sources":["01_main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../js/main.min.js","sourcesContent":["const eventsTopSlider = new Swiper('.events-page__cards .swiper', {\r\n  loop: true,\r\n  spaceBetween: 30,\r\n  pagination: {\r\n    el: '.events-page__cards .swiper-pagination',\r\n    clickable: true\r\n  },\r\n});\r\n\r\nconst eventsResultSlider = new Swiper('.events-search-slider .swiper', {\r\n  // loop: true,\r\n  spaceBetween: 30,\r\n  pagination: {\r\n    el: '.events-search-slider .swiper-pagination',\r\n    clickable: true\r\n  },\r\n  breakpoints: {\r\n    768: {\r\n      slidesPerView: 2\r\n    }\r\n  }\r\n});\r\n\r\nfunction createRequestUrl() {\r\n  const requestPageUrl = document.querySelector('[data-ajax-url]').dataset.ajaxUrl;\r\n  let searchText = document.querySelector('[data-filter-input=\"search\"]').value || '';\r\n  let startDate = document.querySelector('[data-filter-input=\"time_start\"]').value.split(' ')[0];\r\n  let endDate = document.querySelector('[data-filter-input=\"time_end\"]').value.split(' ')[0];\r\n  let status = document.querySelector('.events-page__search-result-item--current').value;\r\n  let tagsString = '';\r\n  document.querySelectorAll('[data-filter-switch]').forEach(el => {\r\n    if (el.dataset.filterSwitch === 'true') {\r\n      tagsString += `tags=${el.value}&`;\r\n    }\r\n  });\r\n\r\n  return `${requestPageUrl}?timeStart=${startDate}&timeEnd=${endDate}&status=${status}&search=${searchText}&${tagsString}&is_ajax=Y`\r\n};\r\n\r\n\r\n\r\nlet getSlides = async function () {\r\n  let url = createRequestUrl();\r\n  try {\r\n    let response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        \"Content-Type\": \"text/plain\",\r\n        \"Access-Control-Allow-Origin\": \"*\"\r\n      },\r\n      mode: 'no-cors'\r\n    });\r\n    let data = await response;\r\n    responseData = data.text();\r\n    return responseData;\r\n  } catch (error) {\r\n    console.error(error)\r\n  }\r\n};\r\n\r\nfunction drawSlider() {\r\n  getSlides().then(\r\n    response => {\r\n      const responseContainer = document.createElement('div');\r\n      const slider = document.querySelector('.data-video-container .swiper-wrapper');\r\n      const upcoming = document.querySelector('#upcoming>span');\r\n      const past = document.querySelector('#past>span');\r\n      responseContainer.classList.add('response');\r\n      responseContainer.style.display = 'none';\r\n      document.querySelector('body').appendChild(responseContainer);\r\n      responseContainer.innerHTML = response.replace(/\\s\\s+/g, '');\r\n\r\n      upcoming.innerText = responseContainer.querySelector('[value=\"upcoming\"]>span').innerText;\r\n      past.innerText = responseContainer.querySelector('[value=\"past\"]>span').innerText;\r\n      slider.innerHTML = responseContainer.querySelector('.swiper-wrapper').innerHTML;\r\n      eventsResultSlider.init();\r\n\r\n      document.querySelector('.response').remove();\r\n    }\r\n  )\r\n}\r\n\r\nfunction tagButtonsSwitcher() {\r\n  const btns = document.querySelectorAll('[data-filter-switch]');\r\n  btns.forEach(el => {\r\n    el.addEventListener('click', toggle);\r\n    el.addEventListener('click', (e) => {\r\n      e.preventDefault\r\n      setTimeout((e) => {\r\n        drawSlider();\r\n      }, 50);\r\n    });\r\n  });\r\n\r\n  function toggle() {\r\n    this.dataset.filterSwitch = this.dataset.filterSwitch === \"true\" ? \"false\" : \"true\";\r\n  }\r\n  drawSlider();\r\n};\r\ntagButtonsSwitcher();\r\n\r\nfunction dateSwitcher() {\r\n  let dates = document.querySelectorAll('.events-page__search-result-item');\r\n  dates.forEach(el => {\r\n    if (!el.classList.contains('.events-page__search-result-item--current')) {\r\n      el.addEventListener('click', switchDates)\r\n    }\r\n  })\r\n  switchDates(e) {\r\n    e.preventDefault();\r\n    dates.forEach(el => el.classList.remove('events-page__search-result-item--current'));\r\n    e.target.classList.add('events-page__search-result-item--current');\r\n    drawSlider();\r\n  }\r\n}\r\ndateSwitcher();\r\n\r\nfunction searchOnInput() {\r\n  const inputs = document.querySelectorAll('[data-filter-input]');\r\n  inputs.forEach(el => el.addEventListener('change', drawSlider));\r\n\r\n  document.querySelector('.video-page__search-block form[data-video-filter]').addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    drawSlider();\r\n  });\r\n};\r\n\r\nsearchOnInput();"]}