{"version":3,"sources":["01_main.js"],"names":["eventsTopSlider","Swiper","loop","spaceBetween","pagination","el","clickable","eventsResultSlider","breakpoints","slidesPerView","createRequestUrl","requestPageUrl","document","querySelector","dataset","ajaxUrl","searchText","value","startDate","split","endDate","status","tagsString","querySelectorAll","forEach","filterSwitch","getSlides","async","url","response","fetch","method","headers","mode","data","responseData","text","error","console","drawSlider","then","responseContainer","createElement","slider","upcoming","past","classList","add","style","display","appendChild","innerHTML","replace","innerText","init","remove","tagButtonsSwitcher","toggle","this","addEventListener","e","preventDefault","setTimeout","dateSwitcher","dates","switchDates","target","contains","searchOnInput"],"mappings":"AAAA,MAAMA,gBAAkB,IAAIC,OAAO,8BAA+B,CAChEC,MAAM,EACNC,aAAc,GACdC,WAAY,CACVC,GAAI,yCACJC,WAAW,KAITC,mBAAqB,IAAIN,OAAO,gCAAiC,CAErEE,aAAc,GACdC,WAAY,CACVC,GAAI,2CACJC,WAAW,GAEbE,YAAa,CACX,IAAK,CACHC,cAAe,MAKrB,SAASC,mBACP,MAAMC,EAAiBC,SAASC,cAAc,mBAAmBC,QAAQC,QACzE,IAAIC,EAAaJ,SAASC,cAAc,gCAAgCI,OAAS,GAC7EC,EAAYN,SAASC,cAAc,oCAAoCI,MAAME,MAAM,KAAK,GACxFC,EAAUR,SAASC,cAAc,kCAAkCI,MAAME,MAAM,KAAK,GACpFE,EAAST,SAASC,cAAc,6CAA6CI,MAC7EK,EAAa,GAOjB,OANAV,SAASW,iBAAiB,wBAAwBC,SAAQnB,IACxB,SAA5BA,EAAGS,QAAQW,eACbH,GAAc,QAAQjB,EAAGY,aAItB,GAAGN,eAA4BO,aAAqBE,YAAkBC,YAAiBL,KAAcM,cAK9G,IAAII,UAAYC,iBACd,IAAIC,EAAMlB,mBACV,IACE,IAAImB,QAAiBC,MAAMF,EAAK,CAC9BG,OAAQ,MACRC,QAAS,CACP,eAAgB,aAChB,8BAA+B,KAEjCC,KAAM,YAEJC,QAAaL,EAEjB,OADAM,aAAeD,EAAKE,OACbD,aACP,MAAOE,GACPC,QAAQD,MAAMA,KAIlB,SAASE,aACPb,YAAYc,MACVX,IACE,MAAMY,EAAoB7B,SAAS8B,cAAc,OAC3CC,EAAS/B,SAASC,cAAc,yCAChC+B,EAAWhC,SAASC,cAAc,kBAClCgC,EAAOjC,SAASC,cAAc,cACpC4B,EAAkBK,UAAUC,IAAI,YAChCN,EAAkBO,MAAMC,QAAU,OAClCrC,SAASC,cAAc,QAAQqC,YAAYT,GAC3CA,EAAkBU,UAAYtB,EAASuB,QAAQ,SAAU,IAEzDR,EAASS,UAAYZ,EAAkB5B,cAAc,2BAA2BwC,UAChFR,EAAKQ,UAAYZ,EAAkB5B,cAAc,uBAAuBwC,UACxEV,EAAOQ,UAAYV,EAAkB5B,cAAc,mBAAmBsC,UACtE5C,mBAAmB+C,OAEnB1C,SAASC,cAAc,aAAa0C,YAK1C,SAASC,qBAYP,SAASC,IACPC,KAAK5C,QAAQW,aAA6C,SAA9BiC,KAAK5C,QAAQW,aAA0B,QAAU,OAZlEb,SAASW,iBAAiB,wBAClCC,SAAQnB,IACXA,EAAGsD,iBAAiB,QAASF,GAC7BpD,EAAGsD,iBAAiB,SAAUC,IAC5BA,EAAEC,eACFC,YAAYF,IACVrB,eACC,UAOPA,aAIF,SAASwB,eACP,IAAIC,EAAQpD,SAASW,iBAAiB,oCAOtC,SAAS0C,EAAYL,GACnBA,EAAEC,iBACFG,EAAMxC,SAAQnB,GAAMA,EAAGyC,UAAUS,OAAO,8CACxCK,EAAEM,OAAOpB,UAAUC,IAAI,4CACvBR,aAVFyB,EAAMxC,SAAQnB,IACPA,EAAGyC,UAAUqB,SAAS,8CACzB9D,EAAGsD,iBAAiB,QAASM,MAanC,SAASG,gBACQxD,SAASW,iBAAiB,uBAClCC,SAAQnB,GAAMA,EAAGsD,iBAAiB,SAAUpB,cAEnD3B,SAASC,cAAc,qDAAqD8C,iBAAiB,UAAWC,IACtGA,EAAEC,iBACFtB,gBAzBJiB,qBAiBAO,eAYAK","file":"../js/main.min.js","sourcesContent":["const eventsTopSlider = new Swiper('.events-page__cards .swiper', {\n  loop: true,\n  spaceBetween: 30,\n  pagination: {\n    el: '.events-page__cards .swiper-pagination',\n    clickable: true\n  },\n});\n\nconst eventsResultSlider = new Swiper('.events-search-slider .swiper', {\n  // loop: true,\n  spaceBetween: 30,\n  pagination: {\n    el: '.events-search-slider .swiper-pagination',\n    clickable: true\n  },\n  breakpoints: {\n    768: {\n      slidesPerView: 2\n    }\n  }\n});\n\nfunction createRequestUrl() {\n  const requestPageUrl = document.querySelector('[data-ajax-url]').dataset.ajaxUrl;\n  let searchText = document.querySelector('[data-filter-input=\"search\"]').value || '';\n  let startDate = document.querySelector('[data-filter-input=\"time_start\"]').value.split(' ')[0];\n  let endDate = document.querySelector('[data-filter-input=\"time_end\"]').value.split(' ')[0];\n  let status = document.querySelector('.events-page__search-result-item--current').value;\n  let tagsString = '';\n  document.querySelectorAll('[data-filter-switch]').forEach(el => {\n    if (el.dataset.filterSwitch === 'true') {\n      tagsString += `tags=${el.value}&`;\n    }\n  });\n\n  return `${requestPageUrl}?timeStart=${startDate}&timeEnd=${endDate}&status=${status}&search=${searchText}&${tagsString}&is_ajax=Y`\n};\n\n\n\nlet getSlides = async function () {\n  let url = createRequestUrl();\n  try {\n    let response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"text/plain\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n      mode: 'no-cors'\n    });\n    let data = await response;\n    responseData = data.text();\n    return responseData;\n  } catch (error) {\n    console.error(error)\n  }\n};\n\nfunction drawSlider() {\n  getSlides().then(\n    response => {\n      const responseContainer = document.createElement('div');\n      const slider = document.querySelector('.data-video-container .swiper-wrapper');\n      const upcoming = document.querySelector('#upcoming>span');\n      const past = document.querySelector('#past>span');\n      responseContainer.classList.add('response');\n      responseContainer.style.display = 'none';\n      document.querySelector('body').appendChild(responseContainer);\n      responseContainer.innerHTML = response.replace(/\\s\\s+/g, '');\n\n      upcoming.innerText = responseContainer.querySelector('[value=\"upcoming\"]>span').innerText;\n      past.innerText = responseContainer.querySelector('[value=\"past\"]>span').innerText;\n      slider.innerHTML = responseContainer.querySelector('.swiper-wrapper').innerHTML;\n      eventsResultSlider.init();\n\n      document.querySelector('.response').remove();\n    }\n  )\n}\n\nfunction tagButtonsSwitcher() {\n  const btns = document.querySelectorAll('[data-filter-switch]');\n  btns.forEach(el => {\n    el.addEventListener('click', toggle);\n    el.addEventListener('click', (e) => {\n      e.preventDefault\n      setTimeout((e) => {\n        drawSlider();\n      }, 50);\n    });\n  });\n\n  function toggle() {\n    this.dataset.filterSwitch = this.dataset.filterSwitch === \"true\" ? \"false\" : \"true\";\n  }\n  drawSlider();\n};\ntagButtonsSwitcher();\n\nfunction dateSwitcher() {\n  let dates = document.querySelectorAll('.events-page__search-result-item');\n  dates.forEach(el => {\n    if (!el.classList.contains('.events-page__search-result-item--current')) {\n      el.addEventListener('click', switchDates)\n    }\n  })\n\n  function switchDates(e) {\n    e.preventDefault();\n    dates.forEach(el => el.classList.remove('events-page__search-result-item--current'));\n    e.target.classList.add('events-page__search-result-item--current');\n    drawSlider();\n  }\n}\ndateSwitcher();\n\nfunction searchOnInput() {\n  const inputs = document.querySelectorAll('[data-filter-input]');\n  inputs.forEach(el => el.addEventListener('change', drawSlider));\n\n  document.querySelector('.video-page__search-block form[data-video-filter]').addEventListener('submit', (e) => {\n    e.preventDefault();\n    drawSlider();\n  });\n};\n\nsearchOnInput();"]}